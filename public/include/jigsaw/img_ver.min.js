;function imgVer(i){var j=eval(i.el);var w=i.width;var h=i.height;var k=48;var l=20;var m=l+k;var n=w-l-k-k/6;var o=l;var p=h-l-k-k/6;function RandomNum(a,b){var c=b-a;var d=Math.random();if(Math.round(d*c)===0){return a+1}else if(Math.round(d*b)===b){return b-1}else{var e=a+Math.round(d*c)-1;return e}}var q=RandomNum(2,100);var r='https://picsum.photos/id/'+q+'/300/150';var X=RandomNum(m,n);var Y=RandomNum(p,o);var s=-X+10;var t='<div style="position:relative;padding:16px 16px 28px;border:1px solid #ddd;background:#f2ece1;border-radius:16px;">';t+='<div style="position:relative;overflow:hidden;width:'+w+'px;">';t+='<div style="position:relative;width:'+w+'px;height:'+h+'px;">';t+='<img id="scream" src="'+r+'" style="width:'+w+'px;height:'+h+'px;">';t+='<canvas id="puzzleBox" width="'+w+'" height="'+h+'" style="position:absolute;left:0;top:0;z-index:22;"></canvas>';t+='</div>';t+='<div class="puzzle-lost-box" style="position:absolute;width:'+w+'px;height:'+h+'px;top:0;left:'+s+'px;z-index:111;">';t+='<canvas id="puzzleShadow" width="'+w+'" height="'+h+'" style="position:absolute;left:0;top:0;z-index:22;"></canvas>';t+='<canvas id="puzzleLost" width="'+w+'" height="'+h+'" style="position:absolute;left:0;top:0;z-index:33;"></canvas>';t+='</div>';t+='<p class="ver-tips"></p>';t+='</div>';t+='<div class="re-btn"><a></a></div>';t+='</div>';t+='<br>';t+='<div style="position:relative;width:'+w+'px;margin:auto;">';t+='<div style="border:1px solid #c3c3c3;border-radius:24px;background:#ece4dd;box-shadow:0 1px 1px rgba(12,10,10,0.2) inset;">';t+='<p style="font-size:12px;color: #486c80;line-height:28px;margin:0;text-align:right;padding-right:22px;">按住左边滑块，拖动完成上方拼图</p>';t+='</div>';t+='<div class="slider-btn"></div>';t+='</div>';j.html(t);var d=k/3;var c=document.getElementById("puzzleBox");var u=c.getContext("2d");u.globalCompositeOperation="xor";u.shadowBlur=10;u.shadowColor="#fff";u.shadowOffsetX=3;u.shadowOffsetY=3;u.fillStyle="rgba(0,0,0,0.7)";u.beginPath();u.lineWidth="1";u.strokeStyle="rgba(0,0,0,0)";u.moveTo(X,Y);u.lineTo(X+d,Y);u.bezierCurveTo(X+d,Y-d,X+2*d,Y-d,X+2*d,Y);u.lineTo(X+3*d,Y);u.lineTo(X+3*d,Y+d);u.bezierCurveTo(X+2*d,Y+d,X+2*d,Y+2*d,X+3*d,Y+2*d);u.lineTo(X+3*d,Y+3*d);u.lineTo(X,Y+3*d);u.closePath();u.stroke();u.fill();var v=document.getElementById("puzzleLost");var x=document.getElementById("puzzleShadow");var y=v.getContext("2d");var z=x.getContext("2d");var A=new Image();A.src=r;A.onload=function(){y.drawImage(A,0,0,w,h)};y.beginPath();y.strokeStyle="rgba(0,0,0,0)";y.moveTo(X,Y);y.lineTo(X+d,Y);y.bezierCurveTo(X+d,Y-d,X+2*d,Y-d,X+2*d,Y);y.lineTo(X+3*d,Y);y.lineTo(X+3*d,Y+d);y.bezierCurveTo(X+2*d,Y+d,X+2*d,Y+2*d,X+3*d,Y+2*d);y.lineTo(X+3*d,Y+3*d);y.lineTo(X,Y+3*d);y.closePath();y.stroke();z.fill();y.clip();z.beginPath();z.lineWidth="1";z.strokeStyle="rgba(0,0,0,0)";z.moveTo(X,Y);z.lineTo(X+d,Y);z.bezierCurveTo(X+d,Y-d,X+2*d,Y-d,X+2*d,Y);z.lineTo(X+3*d,Y);z.lineTo(X+3*d,Y+d);z.bezierCurveTo(X+2*d,Y+d,X+2*d,Y+2*d,X+3*d,Y+2*d);z.lineTo(X+3*d,Y+3*d);z.lineTo(X,Y+3*d);z.closePath();z.stroke();z.shadowBlur=20;z.shadowColor="black";z.fill();var B='';$(".slider-btn").on('mousedown touchstart',function(e){e=e||window.event;$(this).css({"background-position":"0 -216px"});B=e.pageX||e.originalEvent.targetTouches[0].pageX});$(window).on('mousemove touchmove',function(e){e=e||window.event;var a=e.pageX||e.originalEvent.targetTouches[0].pageX;var d=a-B;if(B===''){}else{if(d<0||d>(w-l-k)){}else{$(".slider-btn").css({"left":d+'px',"transition":"inherit"});$("#puzzleLost").css({"left":d+'px',"transition":"inherit"});$("#puzzleShadow").css({"left":d+'px',"transition":"inherit"})}}});$(window).on('mouseup touchend',function(e){e=e||window.event;var a=e.originalEvent.changedTouches===undefined?B:e.originalEvent.changedTouches[0];var b=e.pageX-B||a.pageX-B;var c=X-10;var d=4;var f=c-d;var g=c+d;if(B===''){}else{if(g>b&&b>f){$(".ver-tips").html('<i style="background-position:-4px -1207px;"></i><span style="color:#42ca6b;">验证通过</span><span></span>');$(".ver-tips").addClass("slider-tips");$(".puzzle-lost-box").addClass("hidden");$("#puzzleBox").addClass("hidden");setTimeout(function(){$(".ver-tips").removeClass("slider-tips");imgVer(i)},2000);i.success()}else{$(".ver-tips").html('<i style="background-position:-4px -1229px;"></i><span style="color:red;">验证失败:</span><span style="margin-left:4px;">拖动滑块将悬浮图像正确拼合</span>');$(".ver-tips").addClass("slider-tips");setTimeout(function(){$(".ver-tips").removeClass("slider-tips")},2000);i.error()}}setTimeout(function(){$(".slider-btn").css({"left":'0',"transition":"left 0.5s"});$("#puzzleLost").css({"left":'0',"transition":"left 0.5s"});$("#puzzleShadow").css({"left":'0',"transition":"left 0.5s"})},1000);$(".slider-btn").css({"background-position":"0 -84px"});B=''});$(".re-btn a").on("click",function(){imgVer(i)})};